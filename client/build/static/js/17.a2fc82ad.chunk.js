(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{382:function(e,r,t){"use strict";var n=t(3),a=t.n(n),i=t(13),o=t.n(i),s=t(349),u=t.n(s),p=t(0),l=t.n(p),c=t(94),m=t(2),f=t.n(m),d=t(92),y=t.n(d),h=t(110),b=t.n(h),g=t(6116),v=t.n(g),w=t(59),O=t(43),E=function(e,r,t,n,i,o){var s=e.getIn,u=o.arrayInsert,p=o.arrayMove,l=o.arrayPop,c=o.arrayPush,m=o.arrayRemove,f=o.arrayRemoveAll,d=o.arrayShift,y=o.arraySplice,h=o.arraySwap,g=o.arrayUnshift,v=o.asyncError,w=o.dirty,O=o.length,E=o.pristine,j=o.submitError,F=(o.state,o.submitFailed),P=o.submitting,x=o.syncError,S=o.syncWarning,T=o.value,A=o.props,R=b()(o,["arrayInsert","arrayMove","arrayPop","arrayPush","arrayRemove","arrayRemoveAll","arrayShift","arraySplice","arraySwap","arrayUnshift","asyncError","dirty","length","pristine","submitError","state","submitFailed","submitting","syncError","syncWarning","value","props"]),L=x||v||j,C=S,_=n?r.replace(n+".",""):r,k=a()({fields:{_isFieldArray:!0,forEach:function(e){return(T||[]).forEach(function(r,t){return e(_+"["+t+"]",t,k.fields)})},get:i,getAll:function(){return T},insert:u,length:O,map:function(e){return(T||[]).map(function(r,t){return e(_+"["+t+"]",t,k.fields)})},move:p,name:r,pop:function(){return l(),s(T,String(O-1))},push:c,reduce:function(e,r){return(T||[]).reduce(function(r,t,n){return e(r,_+"["+n+"]",n,k.fields)},r)},remove:m,removeAll:f,shift:function(){return d(),s(T,"0")},splice:y,swap:h,unshift:g},meta:{dirty:w,error:L,form:t,warning:C,invalid:!!L,pristine:E,submitting:P,submitFailed:F,valid:!L}},A,R);return k},j=t(44),F=t(6112),P=["_reduxForm","value"],x=function(e){var r=e.deepEqual,t=e.getIn,n=e.size,a=e.equals,i=e.orderChanged,s=function(n){function s(){for(var e,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))||this).ref=l.a.createRef(),e.getValue=function(r){return e.props.value&&t(e.props.value,String(r))},e}u()(s,n);var c=s.prototype;return c.shouldComponentUpdate=function(e){var t=this,n=this.props.value,o=e.value;if(n&&o){var s=a(o,n),u=i(n,o);if((n.length||n.size)!==(o.length||o.size)||s&&u||e.rerenderOnEveryChange&&n.some(function(e,t){return!r(e,o[t])}))return!0}var p=Object.keys(e),l=Object.keys(this.props);return!!(this.props.children||e.children||p.length!==l.length||p.some(function(n){return!~P.indexOf(n)&&!r(t.props[n],e[n])}))},c.getRenderedComponent=function(){return this.ref.current},c.render=function(){var r=this.props,t=r.component,n=r.forwardRef,a=r.name,i=r._reduxForm,o=(r.validate,r.warn,r.rerenderOnEveryChange,b()(r,["component","forwardRef","name","_reduxForm","validate","warn","rerenderOnEveryChange"])),s=E(e,a,i.form,i.sectionPrefix,this.getValue,o);return n&&(s.ref=this.ref),Object(p.createElement)(t,s)},o()(s,[{key:"dirty",get:function(){return this.props.dirty}},{key:"pristine",get:function(){return this.props.pristine}},{key:"value",get:function(){return this.props.value}}]),s}(p.Component);return s.propTypes={component:F.a,props:f.a.object,rerenderOnEveryChange:f.a.bool},s.defaultProps={rerenderOnEveryChange:!1},Object(w.b)(function(e,a){var i=a.name,o=a._reduxForm,s=o.initialValues,u=(0,o.getFormState)(e),p=t(u,"initial."+i)||s&&t(s,i),l=t(u,"values."+i),c=t(u,"submitting"),m=function(e,r){return j.a.getIn(e,r+"._error")}(t(u,"syncErrors"),i),f=function(e,r){return t(e,r+"._warning")}(t(u,"syncWarnings"),i),d=r(l,p);return{asyncError:t(u,"asyncErrors."+i+"._error"),dirty:!d,pristine:d,state:t(u,"fields."+i),submitError:t(u,"submitErrors."+i+"._error"),submitFailed:t(u,"submitFailed"),submitting:c,syncError:m,syncWarning:f,value:l,length:n(l)}},function(e,r){var t=r.name,n=r._reduxForm,a=n.arrayInsert,i=n.arrayMove,o=n.arrayPop,s=n.arrayPush,u=n.arrayRemove,p=n.arrayRemoveAll,l=n.arrayShift,c=n.arraySplice,m=n.arraySwap,f=n.arrayUnshift;return v()({arrayInsert:a,arrayMove:i,arrayPop:o,arrayPush:s,arrayRemove:u,arrayRemoveAll:p,arrayShift:l,arraySplice:c,arraySwap:m,arrayUnshift:f},function(r){return Object(O.b)(r.bind(null,t),e)})},void 0,{forwardRef:!0})(s)},S=t(6165),T=t(6127),A=function(e,r){return e&&function(){for(var t,n=(t=e,Array.isArray(t)?t:[t]),a=0;a<n.length;a++){var i,o=n[a].apply(n,arguments);if(o)return(i={})[r]=o,i}}},R=function(e){var r=x(e),t=function(e){function t(r){var t;if((t=e.call(this,r)||this).ref=l.a.createRef(),!r._reduxForm)throw new Error("FieldArray must be inside a component decorated with reduxForm()");return t}u()(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this.props._reduxForm.register(this.name,"FieldArray",function(){return A(e.props.validate,"_error")},function(){return A(e.props.warn,"_warning")})},n.componentWillReceiveProps=function(e){var r=Object(S.a)(this.props,this.props.name),t=Object(S.a)(e,e.name);r!==t&&(this.props._reduxForm.unregister(r),this.props._reduxForm.register(t,"FieldArray"))},n.componentWillUnmount=function(){this.props._reduxForm.unregister(this.name)},n.getRenderedComponent=function(){return y()(this.props.forwardRef,"If you want to access getRenderedComponent(), you must specify a forwardRef prop to FieldArray"),this.ref&&this.ref.current.getRenderedComponent()},n.render=function(){return Object(p.createElement)(r,a()({},this.props,{name:this.name,ref:this.ref}))},o()(t,[{key:"name",get:function(){return Object(S.a)(this.props,this.props.name)}},{key:"dirty",get:function(){return!this.ref||this.ref.current.dirty}},{key:"pristine",get:function(){return!(!this.ref||!this.ref.current.pristine)}},{key:"value",get:function(){return this.ref?this.ref.current.value:void 0}}]),t}(p.Component);return t.propTypes={name:f.a.string.isRequired,component:F.a,props:f.a.object,validate:f.a.oneOfType([f.a.func,f.a.arrayOf(f.a.func)]),warn:f.a.oneOfType([f.a.func,f.a.arrayOf(f.a.func)]),forwardRef:f.a.bool,_reduxForm:f.a.object},Object(c.polyfill)(t),Object(T.b)(t)};r.a=R(j.a)},6091:function(e,r,t){"use strict";function n(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}t.d(r,"a",function(){return n})},6388:function(e,r,t){"use strict";t.r(r);var n=t(0),a=t.n(n),i=t(59),o=t(19),s=t(65),u=t.n(s),p=t(66),l=t(144),c=t(72),m=t(73),f=t(75),d=t(74),y=t(76),h=t(6091),b=t(26),g=t(196),v=t(381),w=t(382),O=t(109),E=t(380),j=t(69),F=function(e){return/^[+-]?[0-9]{1,3}(?:,?[0-9]{3})*\.[0-9]{2}$/.test(e)?void 0:"Price must be formatted like so: 123.45"};function P(e){return e?(function(e){return-1!==e.toString().indexOf(".")}(e)||(e=function(e){return e/100}(e)),e.toFixed(2)):e}var x=function(e){var r=e.label,t=e.input,n=e.disabled,i=e.autoComplete,s=e.meta,u=s.touched,p=s.invalid,l=s.error,c=Object(h.a)(e,["label","input","disabled","autoComplete","meta"]);return a.a.createElement(o.T,Object.assign({fullWidth:!0,disabled:n,label:r,placeholder:r,autoComplete:i,error:u&&p,helperText:u&&l},t,c))},S=function(e){var r=e.fields,t=e.permitTypesList,n=e.price;return a.a.createElement("div",null,r.map(function(e,r){return a.a.createElement(v.a,{key:e,name:e,type:"text",component:x,label:"Permit ".concat(t[r].permitType," Price One ").concat(n),validate:[F]})}))},T=function(e){function r(){var e,t;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=Object(f.a)(this,(e=Object(d.a)(r)).call.apply(e,[this].concat(a)))).updateForm=function(){t.props.fetchHelp().then(function(e){u.a.all([u.a.get("/api/fetchGlobal/swapsAllowedDefault",e),u.a.get("/api/fetchGlobal/swapPeriod",e)]).then(u.a.spread(function(e,r){var n={permitTypesPriceOneDayList:t.props.globalFormValues.permitTypesList.map(function(e){return P(e.priceOneDay)}),permitTypesPriceOneYearList:t.props.globalFormValues.permitTypesList.map(function(e){return P(e.priceOneYear)}),permitList:t.props.globalFormValues.permitTypesList};n.swapPeriod=r.data.value/1e3,n.swapsAllowedDefault=e.data.value,t.props.initialize(n)})).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)})},t}return Object(y.a)(r,e),Object(m.a)(r,[{key:"componentDidMount",value:function(){this.updateForm()}},{key:"render",value:function(){var e=this.props,r=e.handleSubmit,t=e.classes;return a.a.createElement("form",{onSubmit:r},a.a.createElement(o.t,{container:!0,spacing:24},a.a.createElement(o.t,{item:!0,sm:6,xs:12},a.a.createElement(o.p,{margin:"normal",required:!0,fullWidth:!0},a.a.createElement(v.a,{name:"swapPeriod",component:x,label:"Swap Period (s)",autoFocus:!0,disabled:this.props.update}))),a.a.createElement(o.t,{item:!0,sm:6,xs:12},a.a.createElement(o.p,{margin:"normal",required:!0,fullWidth:!0},a.a.createElement(v.a,{name:"swapsAllowedDefault",component:x,label:"Swaps Allowed by Default",autoFocus:!0,disabled:this.props.update}))),a.a.createElement(o.t,{item:!0,xs:6},a.a.createElement(o.p,{margin:"normal",fullWidth:!0},a.a.createElement(w.a,{name:"permitTypesPriceOneDayList",component:S,permitTypesList:this.props.globalFormValues.permitTypesList,price:"Day"}))),a.a.createElement(o.t,{item:!0,xs:6},a.a.createElement(o.p,{margin:"normal",fullWidth:!0},a.a.createElement(w.a,{name:"permitTypesPriceOneYearList",component:S,permitTypesList:this.props.globalFormValues.permitTypesList,price:"Year"})))),a.a.createElement("br",null),a.a.createElement("div",{className:t.buttons},a.a.createElement(o.c,{type:"submit",variant:"contained",color:"primary",className:t.submit},"Update")))}}]),r}(a.a.Component),A=Object(g.a)(j.e,Object(E.a)({form:"GlobalForm"}),Object(i.b)(function(e){return{globalFormValues:e.ui.formValues}},function(e){return{fetchHelp:function(r,t,n,a){return e(Object(l.a)(r,t,n,a))},pushArray:O.a}}),Object(b.withStyles)(function(e){return{submit:{marginTop:3*e.spacing.unit},buttons:{display:"flex",justifyContent:"space-between"}}}))(T);r.default=Object(i.b)(null,function(e){return{fetchHelp:function(){return e(Object(l.a)())},dispatch:e}})(function(e){return a.a.createElement("div",null,a.a.createElement(o.V,{variant:"h4",gutterBottom:!0,component:"h4"},"Global Form"),a.a.createElement(A,{onSubmit:function(r){return function(e,r){e.permitList.map(function(r,t){return e.permitList[t].priceOneDay=100*e.permitTypesPriceOneDayList[t],e.permitList[t].priceOneYear=100*e.permitTypesPriceOneYearList[t],null});var t={value:e.permitList},n={value:1e3*e.swapPeriod},a={value:e.swapsAllowedDefault};r.fetchHelp().then(function(e){u.a.all([u.a.post("/api/putGlobal/permitTypes",t,e),u.a.post("/api/putGlobal/swapPeriod",n,e),u.a.post("/api/putGlobal/swapsAllowedDefault",a,e)]).then(u.a.spread(function(e,t,n){200===e.status?r.dispatch(Object(p.a)({message:"Updated permit pricing"})):r.dispatch(Object(p.a)({message:"Failed to update permit pricing",options:{variant:"warning"}})),200===t.status?r.dispatch(Object(p.a)({message:"Updated swap period"})):r.dispatch(Object(p.a)({message:"Failed to update swap period",options:{variant:"warning"}})),200===n.status?r.dispatch(Object(p.a)({message:"Updated default swaps allowed"})):r.dispatch(Object(p.a)({message:"Failed to update default swaps allowed",options:{variant:"warning"}}))}))}).catch(function(e){return console.log(e)})}(r,e)}}))})}}]);
//# sourceMappingURL=17.a2fc82ad.chunk.js.map