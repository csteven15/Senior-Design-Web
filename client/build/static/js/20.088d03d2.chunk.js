(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{6386:function(e,t,a){"use strict";a.r(t);var n=a(72),r=a(73),l=a(75),i=a(74),c=a(76),o=a(0),s=a.n(o),u=a(19),m=a(26),h=a(78),d=a(49),p=a(69),f=Object(m.withStyles)(function(e){return{card:{display:"flex",justifyContent:"space-between"},right:{color:"#000000",width:"70%",display:"flex",alignItems:"center",justifyContent:"center",padding:"10px"},left:{width:"30%",display:"flex",alignItems:"center",justifyContent:"center"},icon:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff"},avatar:{height:"100%"}}})(function(e){var t=e.left,a=e.right,n=e.bgColor,r=e.classes;return s.a.createElement(u.G,{className:r.card},s.a.createElement("div",{className:r.left,style:{backgroundColor:n}},s.a.createElement(u.v,{className:r.icon},t)),s.a.createElement("div",{className:r.right},a))}),g=a(65),y=a.n(g),b=a(59),E=a(196),v=a(144),D=a(6376),w=a(202),C=a(66),j={container:{textAlign:"center"},graphContainer:{backgroundColor:"#1baec3",display:"flex",justifyContent:"space-between",alignItems:"center",color:"#ffffff"},graphTitle:{color:"#ffffff",margin:"10px"},chart:{marginTop:"10px"}},O=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={startDate:new Date((new Date).getTime()-6048e5).getTime(),endDate:(new Date).getTime(),violations:null},a.handleStartDateChange=function(e){a.setState({startDate:e.getTime()},function(){return a.updateGraph()})},a.handleEndDateChange=function(e){e.setHours(23,59,59,999),a.setState({endDate:e.getTime()},function(){return a.updateGraph()})},a.updateGraph=function(){var e={startDate:new Date(a.state.startDate).setHours(0,0,0,0),endDate:new Date(a.state.endDate).setHours(23,59,59,999)};a.props.fetchHelp().then(function(t){y.a.get("/api/violations/fetchViolations?".concat(new URLSearchParams(e).toString()),{headers:t.headers}).then(function(e){if(400!==e.status){var t=[],n={};a.props.permitTypesList.map(function(e,t){return n[e.permitType]=0,null}),e.data.results.map(function(e){return n[e.requiredPermitType]++,null}),a.props.permitTypesList.map(function(e){var a={};return a.name=e.permitType,a.Violations=n[e.permitType],t.push(a),null}),a.setState({violations:t})}else a.props.dispatch(Object(C.a)({message:"Failed to fetch data.",options:{variant:"warning"}}))})})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.updateGraph()}},{key:"render",value:function(){var e=this.state,t=e.startDate,a=e.endDate,n=e.violations;return s.a.createElement("div",{style:j.container},s.a.createElement("div",{style:j.graphContainer},s.a.createElement(u.V,{variant:"h5",gutterBottom:!0,component:"h5",style:j.graphTitle},"Violations")),s.a.createElement("div",{style:{display:"flex",alignItems:"center",marginLeft:"20px"}},s.a.createElement("p",null,"Start Date:"),"\xa0",s.a.createElement(w.a,{keyboard:!1,clearable:!0,disableOpenOnEnter:!0,value:t,onChange:this.handleStartDateChange,maxdate:new Date,disableFuture:!0,format:"MM/dd/yyyy",mask:function(e){return e?[/\d/,/\d/,"/",/\d/,/\d/,"/",/\d/,/\d/,/\d/,/\d/]:[]}}),s.a.createElement("p",null,"End Date:"),"\xa0",s.a.createElement(w.a,{keyboard:!1,clearable:!0,disableOpenOnEnter:!0,value:a,onChange:this.handleEndDateChange,minDate:t,maxdate:new Date,format:"MM/dd/yyyy",disableFuture:!0,mask:function(e){return e?[/\d/,/\d/,"/",/\d/,/\d/,"/",/\d/,/\d/,/\d/,/\d/]:[]}})),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(D.e,{width:"99%",height:300},s.a.createElement(D.b,{width:730,height:250,data:n,style:j.chart},s.a.createElement(D.c,{strokeDasharray:"3 3"}),s.a.createElement(D.g,{dataKey:"name"}),s.a.createElement(D.h,null),s.a.createElement(D.f,null),s.a.createElement(D.d,null),s.a.createElement(D.a,{dataKey:"Violations",fill:"#8884d8"})))),s.a.createElement("div",null))}}]),t}(s.a.Component),x=Object(b.b)(function(e){return{permitTypesList:e.ui.formValues.permitTypesList}},function(e){return{fetchHelp:function(t,a,n,r){return e(Object(v.a)(t,a,n,r))}}})(O),T=a(207);a.d(t,"Dashboard",function(){return S});var S=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={violations:0},a.toggleChart=function(){a.setState(function(e){return{graph:!e.graph}})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new Date,a={startDate:new Date(t.getTime()-864e5).getTime(),endDate:t.getTime()};this.props.fetchHelp().then(function(t){y.a.get("/api/violations/fetchViolations?".concat(new URLSearchParams(a).toString()),t).then(function(t){var a=t.data.results,n=0;a.map(function(e){return n++,null}),e.setState({violations:n})}).catch(function(e){return console.log(e.response)})})}},{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(s.a.Fragment,null,s.a.createElement(u.V,{variant:"h4",gutterBottom:!0,component:"h4"},"Dashboard"),s.a.createElement(u.t,{container:!0,spacing:24},s.a.createElement(u.t,{lg:3,md:4,sm:6,xs:12,item:!0},s.a.createElement(d.b,{to:"/users/search",style:{textDecoration:"none"}},s.a.createElement(f,{left:s.a.createElement(h.l,{className:e.icon}),right:"Search, create, edit, and delete users",bgColor:"#2196f3"}))),s.a.createElement(u.t,{lg:3,md:4,sm:6,xs:12,item:!0},s.a.createElement(f,{left:s.a.createElement(h.e,{className:e.icon}),right:"There are ".concat(this.state.violations," violations in the past 24 hours"),bgColor:"#f44336"})),s.a.createElement(u.t,{lg:3,md:4,sm:6,xs:12,item:!0},s.a.createElement(d.b,{to:"/users/heatmap",style:{textDecoration:"none"}},s.a.createElement(f,{left:s.a.createElement(h.i,{className:e.icon}),right:"See a heatmap of the violations",bgColor:"#7e57c2"}))),s.a.createElement(u.t,{lg:3,md:4,sm:6,xs:12,item:!0},s.a.createElement(d.b,{to:"/users/global",style:{textDecoration:"none"}},s.a.createElement(f,{left:s.a.createElement(h.m,{className:e.icon}),right:"Change global settings",bgColor:"#9e9e9e"}))),s.a.createElement(u.t,{xs:12,item:!0},s.a.createElement(u.G,null,s.a.createElement(w.b,{utils:T.a},s.a.createElement(x,{toggleChart:this.toggleChart,graph:this.state.graph}))))))}}]),t}(s.a.Component);t.default=Object(E.a)(p.e,Object(m.withStyles)(function(e){return{icon:{width:"50%",height:"50%"}}}),Object(b.b)(null,function(e){return{fetchHelp:function(t,a,n,r){return e(Object(v.a)(t,a,n,r))}}}))(S)}}]);
//# sourceMappingURL=20.088d03d2.chunk.js.map