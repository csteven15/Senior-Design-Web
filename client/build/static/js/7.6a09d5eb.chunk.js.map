{"version":3,"sources":["components/StepperSetter.js","components/payment/Review.js"],"names":["compose","withRouter","withStyles","theme","layout","Object","_Users_stevenchen_Fall2018_Group41_Web_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","width","marginLeft","marginRight","breakpoints","up","spacing","unit","stepper","padding","concat","icon","color","connect","state","guestForm","auth","props","classes","activeStep","backgroundColor","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","className","_material_ui_core__WEBPACK_IMPORTED_MODULE_2__","alternativeLabel","style","map","label","key","__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_material_ui_core__WEBPACK_IMPORTED_MODULE_1__","recompose__WEBPACK_IMPORTED_MODULE_3__","react_redux__WEBPACK_IMPORTED_MODULE_4__","react_router_dom__WEBPACK_IMPORTED_MODULE_5__","redux_form__WEBPACK_IMPORTED_MODULE_6__","_actions_AuthActions__WEBPACK_IMPORTED_MODULE_7__","axios__WEBPACK_IMPORTED_MODULE_8__","axios__WEBPACK_IMPORTED_MODULE_8___default","_StepperSetter__WEBPACK_IMPORTED_MODULE_9__","listItem","price","fontWeight","title","marginTop","buttons","display","justifyContent","dispatch","fetchHelp","url","method","header","body","fetchHelper","resetPermitForm","reset","resetVehicleForm","location","data","purchasePrice","toLocaleString","currency","startDate","Date","expDate","expirationDate","setHours","car","information","name","permitType","vehicleMake","make","vehicleModel","model","vehicleYear","year","vehicleColor","licensePlate","tag","payment","cardType","cardPartial","brand","cardNumber","last4","expMonth","expYear","eamil","email","Fragment","variant","gutterBottom","component","disablePadding","type","onClick","history","goBack","getTime","unauthenticated","axios","post","then","res","push","pathname","status","catch","err","console","log","response","headers","purchase"],"mappings":"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","file":"static/js/7.6a09d5eb.chunk.js","sourcesContent":["import React from 'react';\nimport { Stepper, Step, StepLabel, withStyles } from '@material-ui/core';\nimport { withRouter } from 'react-router-dom';\nimport { compose } from 'recompose';\nimport { connect } from 'react-redux';\n\nconst styles = theme => ({\n  layout: {\n    width: 'auto',\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    [theme.breakpoints.up(600 + theme.spacing.unit * 2 * 2)]: {\n      width: '100%',\n      marginLeft: 'auto',\n      marginRight: 'auto',\n    },\n  },\n  stepper: {\n    padding: `${theme.spacing.unit * 3}px 0 ${theme.spacing.unit * 5}px`,\n  },\n  icon: {\n    color: 'green',\n  },\n});\n\nconst StepperSetter = props => {\n  const { classes, activeStep, guestForm } = props;\n  const steps = ['Permit', 'Vehicle', 'Payment', 'Review'];\n  let backgroundColor = '#fafafa';\n  if (guestForm) {\n    backgroundColor = '#ffffff';\n  }\n  return (\n    <div className={classes.layout}>\n      <Stepper activeStep={activeStep} className={classes.stepper} alternativeLabel style={{ backgroundColor: backgroundColor }}>\n        {steps.map(label => (\n          <Step key={label}>\n            <StepLabel>{label}</StepLabel>\n          </Step>\n        ))}\n      </Stepper>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  guestForm: state.auth.guestForm,\n});\n\nexport default compose(\n  withRouter,\n  withStyles(styles),\n  connect(mapStateToProps)\n)(StepperSetter);\n","import React from 'react';\nimport { withStyles, Typography, List, ListItem, ListItemText, Button } from '@material-ui/core';\nimport { compose } from 'recompose';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport { reset } from 'redux-form';\nimport { fetchHelper } from '../../actions/AuthActions';\nimport axios from 'axios';\nimport StepperSetter from '../StepperSetter';\n\nconst styles = theme => ({\n  listItem: {\n    padding: `${theme.spacing.unit}px 0`,\n  },\n  price: {\n    fontWeight: '700',\n  },\n  title: {\n    marginTop: theme.spacing.unit * 1,\n  },\n  buttons: {\n    display: 'flex',\n    justifyContent: 'space-between',\n  },\n});\n\nconst purchase = props => {\n  const url = '/api/permits/purchasePermit';\n  let body = props.location.state.data;\n  let startDate = new Date(props.location.state.data.startDate);\n  let expirationDate = new Date(props.location.state.data.expirationDate);\n  startDate.setHours(0, 0, 0, 0);\n  expirationDate.setHours(23, 59, 59, 999);\n  startDate = startDate.getTime();\n  expirationDate = expirationDate.getTime();\n  body.startDate = startDate;\n  body.expirationDate = expirationDate;\n  if (props.unauthenticated === true) {\n    axios\n      .post(url, body, null)\n      .then(res => {\n        const data = res.data;\n        props.history.push({\n          pathname: '/unauthenticated/page-5',\n          state: { status: 'success', res: data },\n        });\n        props.resetPermitForm();\n        props.resetVehicleForm();\n      })\n      .catch(err => {\n        console.log(err.response);\n        const data = err.response;\n        props.history.push({\n          pathname: '/unauthenticated/page-5',\n          state: { status: 'fail', res: data },\n        });\n      });\n  } else {\n    props.fetchHelp().then(res => {\n      axios\n        .post(url, body, {\n          headers: res.headers,\n        })\n        .then(res => {\n          const data = res.data;\n          props.history.push({\n            pathname: '/authenticated/page-5',\n            state: { status: 'success', res: data },\n          });\n          props.resetPermitForm();\n          props.resetVehicleForm();\n        })\n        .catch(err => {\n          console.log(err.response);\n          const data = err.response;\n          props.history.push({\n            pathname: '/authenticated/page-5',\n            state: { status: 'fail', res: data },\n          });\n        });\n    });\n  }\n};\n\nconst Review = props => {\n  const { classes } = props;\n  const dollars = props.location.state.data.purchasePrice / 100;\n  const price = dollars.toLocaleString('en-US', {\n    style: 'currency',\n    currency: 'USD',\n  });\n  let startDate = new Date(props.location.state.data.startDate);\n  let expDate = new Date(props.location.state.data.expirationDate);\n  startDate.setHours(0, 0, 0, 0);\n  expDate.setHours(23, 59, 59, 999);\n  const car = props.location.state.car;\n  const information = {\n    name: `${props.location.state.data.permitType.permitType} Permit`,\n    startDate: `${startDate.toLocaleString()}`,\n    expDate: `${expDate.toLocaleString()}`,\n    vehicleMake: `${car.make}`,\n    vehicleModel: `${car.model}`,\n    vehicleYear: `${car.year}`,\n    vehicleColor: `${car.color}`,\n    licensePlate: `${car.licensePlate.tag}`,\n    state: `${car.licensePlate.state}`,\n  };\n  const payment = {\n    cardType: props.location.state.cardPartial.brand,\n    cardNumber: `xxxx-xxxx-xxxx-${props.location.state.cardPartial.last4}`,\n    expirationDate: `${props.location.state.cardPartial.expMonth}/${props.location.state.cardPartial.expYear}`,\n    eamil: props.location.state.email,\n    price: price,\n  };\n  return (\n    <React.Fragment>\n      <Typography variant='h4' gutterBottom component='h4'>\n        Order Review\n      </Typography>\n      <StepperSetter activeStep={3} />\n      <Typography variant='h6' gutterBottom>\n        Permit Information\n      </Typography>\n      <List disablePadding>\n        <ListItem className={classes.listItem} key={information.name}>\n          <ListItemText>\n            Permit Type: {information.name} <br />\n            Start Date: {information.startDate} <br />\n            Expiration Date: {information.expDate} <br />\n          </ListItemText>\n        </ListItem>\n        <Typography variant='h6' gutterBottom>\n          Applied Vehicle\n        </Typography>\n        <ListItem className={classes.listItem}>\n          <ListItemText>\n            Make: {information.vehicleMake} <br />\n            Model: {information.vehicleModel} <br />\n            Year: {information.vehicleYear} <br />\n            Color: {information.vehicleColor} <br />\n            Tag: {information.licensePlate} <br />\n            State: {information.state}\n          </ListItemText>\n        </ListItem>\n        <Typography variant='h6' gutterBottom>\n          Payment Information\n        </Typography>\n        <ListItem className={classes.listItem}>\n          <ListItemText>\n            {/* Card Type: {payment.cardType} <br /> */}\n            Card: {payment.cardNumber} <br />\n            {/* Expiration Date: {payment.expirationDate} <br /> */}\n            Receipt Email: {payment.eamil} <br />\n            Price: {payment.price}\n          </ListItemText>\n        </ListItem>\n      </List>\n      <br />\n      <div className={classes.buttons}>\n        <Button type='button' variant='contained' color='secondary' onClick={() => props.history.goBack()}>\n          Back\n        </Button>\n        <Button type='submit' variant='contained' color='secondary' onClick={() => purchase(props)}>\n          Purchase\n        </Button>\n      </div>\n    </React.Fragment>\n  );\n};\n\nconst mapDispatchToProps = dispatch => ({\n  fetchHelp: (url, method, header, body) => dispatch(fetchHelper(url, method, header, body)),\n  resetPermitForm: () => dispatch(reset('PermitForm')),\n  resetVehicleForm: () => dispatch(reset('VehiclesForm')),\n});\n\nexport default compose(\n  withRouter,\n  withStyles(styles),\n  connect(\n    null,\n    mapDispatchToProps\n  )\n)(Review);\n"],"sourceRoot":""}