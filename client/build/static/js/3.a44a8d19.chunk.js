(window.webpackJsonp=window.webpackJsonp||[]).push([[3,4],{352:function(e,t,a){"use strict";var n=a(92),r=a.n(n),c=a(44),o=function(e){var t=e.getIn;return function(e,a){r()(e,"Form value must be specified");var n=a||function(e){return t(e,"form")};return function(a){for(var o=arguments.length,i=new Array(o>1?o-1:0),l=1;l<o;l++)i[l-1]=arguments[l];return r()(i.length,"No fields specified"),1===i.length?t(n(a),e+".values."+i[0]):i.reduce(function(r,o){var i=t(n(a),e+".values."+o);return void 0===i?r:c.a.setIn(r,o,i)},{})}}};t.a=o(c.a)},6091:function(e,t,a){"use strict";function n(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}a.d(t,"a",function(){return n})},6095:function(e,t,a){"use strict";var n=a(90),r=a(0),c=a.n(r),o=a(19),i=a(26),l=a(69),s=a(196),u=a(59);t.a=Object(s.a)(l.e,Object(i.withStyles)(function(e){return{layout:Object(n.a)({width:"auto",marginLeft:"auto",marginRight:"auto"},e.breakpoints.up(600+2*e.spacing.unit*2),{width:"100%",marginLeft:"auto",marginRight:"auto"}),stepper:{padding:"".concat(3*e.spacing.unit,"px 0 ").concat(5*e.spacing.unit,"px")},icon:{color:"green"}}}),Object(u.b)(function(e){return{guestForm:e.auth.guestForm}}))(function(e){var t=e.classes,a=e.activeStep,n="#fafafa";return e.guestForm&&(n="#ffffff"),c.a.createElement("div",{className:t.layout},c.a.createElement(o.K,{activeStep:a,className:t.stepper,alternativeLabel:!0,style:{backgroundColor:n}},["Permit","Vehicle","Payment","Review"].map(function(e){return c.a.createElement(o.I,{key:e},c.a.createElement(o.J,null,e))})))})},6110:function(e,t,a){"use strict";var n=a(72),r=a(73),c=a(75),o=a(74),i=a(76),l=a(6091),s=a(0),u=a.n(s),m=a(19),p=a(381),d=a(380),h=a(196),f=a(69),b=a(59),g=function(e){var t=e.input,a=e.label,n=e.meta,r=n.touched,c=n.error,o=e.children;return u.a.createElement(m.p,{error:r&&c,margin:"normal",required:!0,fullWidth:!0},u.a.createElement(m.z,{htmlFor:a},a),u.a.createElement(m.H,Object.assign({},t,{inputProps:{name:a.toLowerCase(),id:a}}),o),function(e){var t=e.touched,a=e.error;return t&&a?u.a.createElement(m.r,null,t&&a):null}({touched:r,error:c}))},v=function(e){var t=e.label,a=e.input,n=e.disabled,r=e.autoComplete,c=e.meta,o=c.touched,i=c.invalid,s=c.error,p=Object(l.a)(e,["label","input","disabled","autoComplete","meta"]);return u.a.createElement(m.T,Object.assign({disabled:n,label:t,placeholder:t,autoComplete:r,error:o&&i,helperText:o&&"true"===s},a,p))},E=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).fetchPermitsData=function(){var e=a.props.location.state.carData,t={tag:e.licensePlate.tag,state:e.licensePlate.state,make:e.make,model:e.model,year:e.year,color:e.color};a.props.initialize(t)},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.edit&&this.fetchPermitsData()}},{key:"render",value:function(){var e=this,t=this.props.handleSubmit,a=this.props.globalFormValues.statesList,n=this.props.globalFormValues.vehicleMakesList,r=this.props.globalFormValues.vehicleColorsList;return u.a.createElement(u.a.Fragment,null,u.a.createElement("form",{onSubmit:t},u.a.createElement(m.t,{container:!0,spacing:24},u.a.createElement(m.t,{item:!0,xs:12,sm:6},u.a.createElement(m.p,{margin:"normal",required:!0,fullWidth:!0},u.a.createElement(p.a,{name:"tag",component:v,label:"Tag",autoFocus:!0,autoComplete:"tag"}))),u.a.createElement(m.t,{item:!0,sm:6,xs:12},u.a.createElement(p.a,{name:"state",component:g,label:"State",required:!0},a.map(function(e,t){return u.a.createElement(m.F,{key:t,value:e},e)}))),u.a.createElement(m.t,{item:!0,sm:6,xs:12},u.a.createElement(p.a,{name:"make",component:g,label:"Make",required:!0},n.map(function(e,t){return u.a.createElement(m.F,{key:t,value:e},e)}))),u.a.createElement(m.t,{item:!0,xs:12,sm:6},u.a.createElement(m.p,{margin:"normal",required:!0,fullWidth:!0},u.a.createElement(p.a,{name:"model",component:v,label:"Model",autoFocus:!0,autoComplete:"model"}))),u.a.createElement(m.t,{item:!0,sm:6,xs:12},u.a.createElement(p.a,{name:"color",component:g,label:"Color",required:!0},r.map(function(e,t){return u.a.createElement(m.F,{key:t,value:e},e)}))),u.a.createElement(m.t,{item:!0,xs:12,sm:6},u.a.createElement(m.p,{margin:"normal",required:!0,fullWidth:!0},u.a.createElement(p.a,{name:"year",component:v,label:"Year",autoFocus:!0,autoComplete:"licenseYear"})))),u.a.createElement("br",null),u.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},u.a.createElement(m.c,{type:"button",variant:"contained",onClick:function(){return e.props.history.goBack()}},"Back"),this.props.unauthenticated?u.a.createElement(m.c,{type:"submit",variant:"contained",color:"primary"},"Next"):u.a.createElement(m.c,{type:"submit",variant:"contained",color:"primary"},this.props.edit?"Update":"Create"))))}}]),t}(u.a.Component);t.a=Object(h.a)(f.e,Object(d.a)({form:"VehiclesForm",validate:function(e){var t={};return["make","model","year","color","tag","state"].forEach(function(a){e[a]||(t[a]="Required")}),t}}),Object(b.b)(function(e){return{globalFormValues:e.ui.formValues}}))(E)},6124:function(e,t,a){"use strict";var n=a(90),r=a(72),c=a(73),o=a(75),i=a(74),l=a(76),s=a(0),u=a.n(s),m=a(19),p=a(26),d=a(7),h=a.n(d),f=a(78),b=a(69),g=a(196),v=a(59),E=a(144),y=a(66),O=a(65),j=a.n(O),k=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={expanded:!1,anchorEl:null},a.handleExpandClick=function(){a.setState(function(e){return{expanded:!e.expanded}})},a.handleClickMore=function(e){a.setState({anchorEl:e.currentTarget})},a.handleCloseMore=function(e){if(a.setState({anchorEl:null}),"edit"===e)a.props.history.push({pathname:"/editVehicle",state:{carData:a.props.cardata}});else if("delete"===e){var t="/api/users/specific/".concat(a.props.username,"/removeCar"),n=JSON.stringify({id:a.props.cardata._id});a.props.fetchHelp().then(function(e){j.a.post(t,n,{headers:e.headers}).then(function(e){400!==e.status?(a.props.removeCard(a.props.id),a.props.dispatch(Object(y.a)({message:"Successfully deleted vehicle"}))):a.props.dispatch(Object(y.a)({message:"Failed to delete vehicle",options:{variant:"warning"}}))}).catch(function(e){return console.log(e.response)})}).catch(function(e){console.log(e)})}},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"renderHiddenCardContent",value:function(){var e=this.props,t=e.classes,a=e.hiddencardcontent,r=e.leftactions;return a?u.a.createElement(u.a.Fragment,null,u.a.createElement(m.e,{className:t.actions,disableActionSpacing:!0},r,u.a.createElement(m.w,{className:h()(t.expand,Object(n.a)({},t.expandOpen,this.state.expanded)),onClick:this.handleExpandClick,"aria-expanded":this.state.expanded,"aria-label":"Show more"},u.a.createElement(f.f,null))),u.a.createElement(m.j,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},u.a.createElement(m.f,null,a))):null}},{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.subheader,r=t.cardcontent,c=t.cardheaderstyle,o=t.cardbodystyle,i=t.onClick,l=t.action,s=this.state.anchorEl;return u.a.createElement(m.d,{style:{minHeight:"10vw"}},u.a.createElement(m.g,{title:a,subheader:n,style:c,action:"car"===l?u.a.createElement(u.a.Fragment,null,u.a.createElement(m.w,{style:{zIndex:"100"},onClick:this.handleClickMore,"aria-owns":s?"simple-menu":void 0,"aria-haspopup":"true"},u.a.createElement(f.k,null)),u.a.createElement(m.E,{id:"simple-menu",anchorEl:s,open:Boolean(s),onClose:this.handleCloseMore},u.a.createElement(m.F,{onClick:function(){return e.handleCloseMore("edit")}},"Edit"),u.a.createElement(m.F,{onClick:function(){return e.handleCloseMore("delete")}},"Delete"))):null}),u.a.createElement(m.f,{style:o,onClick:i},r),this.renderHiddenCardContent())}}]),t}(u.a.Component);t.a=Object(g.a)(Object(p.withStyles)(function(e){return{actions:{display:"flex"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}),b.e,Object(v.b)(function(e){return{username:e.auth.user.username}},function(e){return{fetchHelp:function(t,a,n,r){return e(Object(E.a)(t,a,n,r))},dispatch:e}}))(k)},6160:function(e,t,a){"use strict";a.r(t),a.d(t,"AddVehicle",function(){return b});var n=a(0),r=a.n(n),c=a(19),o=a(59),i=a(352),l=a(69),s=a(6110),u=a(144),m=a(66),p=a(65),d=a.n(p),h=Object(i.a)("PermitForm"),f=Object(i.a)("VehiclesForm"),b=function(e){return r.a.createElement(r.a.Fragment,null,e.unauthenticated?r.a.createElement(c.V,{variant:"h4",gutterBottom:!0,component:"h4"},"Enter New Vehicle Information"):r.a.createElement(c.V,{variant:"h4",gutterBottom:!0,component:"h4"},"Please Select a Vehicle or Add a New One"),r.a.createElement(s.a,{onSubmit:function(t){return function(e,t){if(!0!==t.unauthenticated){var a="/api/users/specific/".concat(t.username,"/addCar"),n=JSON.stringify({make:e.make,model:e.model,year:e.year,color:e.color,tag:e.tag,state:e.state});t.fetchHelp().then(function(e){d.a.post(a,n,{headers:e.headers}).then(function(e){400!==e.status&&(t.dispatch(Object(m.a)({message:"Successfully added vehicle"})),t.history.goBack())}).catch(function(e){400===e.response.status&&t.dispatch(Object(m.a)({message:"".concat(e.response.data.message),options:{variant:"warning"}}))})}).catch(function(e){console.log(e)})}else{var r={licensePlate:{tag:e.tag,state:e.state},make:e.make,model:e.model,year:e.year,color:e.color};t.history.push({pathname:"/unauthenticated/page-3",state:{selectedVehicle:r}})}}(t,e)},unauthenticated:e.unauthenticated}))};t.default=Object(l.e)(Object(o.b)(function(e,t){return t.unauthenticated?{values:f(e,"make","model","year","color","state","tag")}:{username:e.auth.user.username,values:h(e,"make","model","year","color","state","tag")}},function(e){return{fetchHelp:function(t,a,n,r){return e(Object(u.a)(t,a,n,r))},dispatch:e}})(b))},6378:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a(78),i=a(59),l=a(352),s=a(49),u=a(69),m=a(6095),p=a(72),d=a(73),h=a(75),f=a(74),b=a(76),g=a(26),v=a(109),E=a(381),y=a(380),O=a(196),j=a(144),k=a(6124),C=a(66),w=a(65),x=a.n(w),S=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={carsData:null},a.removeCard=function(e){var t=a.state.carsData;t.splice(e,1),a.setState({carsData:t})},a.updateCar=function(e){var t={id:a.props.location.state.id,car:e};a.props.fetchHelp().then(function(e){x.a.post("/api/permits/updatePermitCar",t,{headers:e.headers}).then(function(e){400!==e.status&&(a.props.history.goBack(),a.props.dispatch(Object(C.a)({message:"Successfully swapped vehicles."})))}).catch(function(e){if(400===e.response.status){var t=new Date(null);t.setSeconds(e.response.data.remainingWaitTime);var n=t.toISOString().substr(11,8);a.props.dispatch(Object(C.a)({message:"Too many swaps. Remaining time: ".concat(n),options:{variant:"warning"}}))}})}).catch(function(e){return console.log(e)})},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){!0!==this.props.unauthenticated&&this.fetchCarsData()}},{key:"componentWillUnmount",value:function(){this.setState({carsData:null})}},{key:"fetchCarsData",value:function(){var e=this;this.props.fetchHelp().then(function(t){x.a.get("/api/users/specific/".concat(e.props.username,"/field/cars"),{headers:t.headers}).then(function(t){400!==t.status?e.setState({carsData:t.data.value}):e.props.dispatch(Object(C.a)({message:"Too many swaps. Remaining time: ".concat(t.data.remainingWaitTime),options:{variant:"warning"}}))})}).catch(function(e){return console.log(e)})}},{key:"renderCards",value:function(){var e=this;return this.state.carsData&&this.state.carsData.length>0?r.a.createElement(c.t,{container:!0,spacing:24},this.state.carsData.map(function(t,a){var n=t,o=function(){!0===e.props.changeVehicle?e.updateCar(n):(e.props.dispatch(Object(v.b)("PermitForm","vehicle",n._id)),e.props.history.push({pathname:"/authenticated/page-3",state:{selectedVehicle:n}}))},i=r.a.createElement(c.V,{variant:"h6",onClick:o},"".concat(n.year," ").concat(n.make," ").concat(n.model)),l=r.a.createElement(c.V,{variant:"body1"},"(","".concat(n.color," ").concat(n.licensePlate.state," ").concat(n.licensePlate.tag),")");return r.a.createElement(c.t,{item:!0,xs:12,md:4,key:a},r.a.createElement(k.a,{subheader:i,cardcontent:l,onClick:o,action:"car",cardata:t,removeCard:e.removeCard,id:a}))})):r.a.createElement(c.t,{item:!0,xs:12},r.a.createElement(c.V,{variant:"h6"},"You have no vehicles!"),r.a.createElement(c.V,{variant:"h6"},"Press the plus button to add a vehicle."))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.handleSubmit;return r.a.createElement("div",{className:a.content},r.a.createElement("form",{onSubmit:n},r.a.createElement(c.t,{container:!0,spacing:24},r.a.createElement(c.t,{item:!0,xs:12},r.a.createElement(E.a,{name:"vehicle",component:"input",type:"hidden"}),this.renderCards())),r.a.createElement("br",null),!0===this.props.changeVehicle?null:r.a.createElement("div",{className:a.buttons},r.a.createElement(c.c,{type:"button",variant:"contained",color:"secondary",onClick:function(){return e.props.history.goBack()}},"Back"),r.a.createElement(c.c,{type:"submit",variant:"contained",color:"secondary",disabled:!0},"Please Click on a Vehicle"))))}}]),t}(r.a.Component),F=Object(O.a)(u.e,Object(y.a)({form:"PermitForm",destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,initialValues:{vehicle:""}}),Object(g.withStyles)(function(e){return{content:{flexGrow:1,padding:3*e.spacing.unit,overflow:"auto"},buttons:{display:"flex",justifyContent:"space-between"},button:{marginTop:3*e.spacing.unit,marginLeft:e.spacing.unit,textDecoration:"none"}}}),Object(i.b)(function(e,t){return t.unauthenticated?{}:{guestForm:e.auth.guestForm,username:e.auth.user.username}},function(e){return{fetchHelp:function(t,a,n,r){return e(Object(j.a)(t,a,n,r))}}}))(S),V=a(6160),P=Object(l.a)("PermitForm");t.default=Object(u.e)(Object(i.b)(function(e,t){return t.unauthenticated?{values:P(e,"make","model","year","color","state","tag")}:{username:e.auth.user.username,values:P(e,"make","model","year","color","state","tag")}})(function(e){var t=e.unauthenticated,a=e.changeVehicle;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{activeStep:1}),r.a.createElement(V.default,{unauthenticated:!0})):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.V,{variant:"h4",gutterBottom:!0,component:"h4"},"Please Select a Vehicle or Add a New One"),!0===a?null:r.a.createElement(m.a,{activeStep:1}),r.a.createElement(F,{onSubmit:function(t){return function(e,t){t.history.push({pathname:"/authenticated/page-3",state:{selectedVehicle:e}})}(t,e)},changeVehicle:a}),r.a.createElement("div",{style:{position:"fixed",bottom:70,right:30}},r.a.createElement(s.b,{to:"/addVehicle",style:{textDecoration:"none"}},r.a.createElement(c.o,{color:"secondary",style:{lineHeight:0}},r.a.createElement(c.v,null,r.a.createElement(o.a,null))))))}))}}]);
//# sourceMappingURL=3.a44a8d19.chunk.js.map