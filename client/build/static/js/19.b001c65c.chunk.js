(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{6124:function(e,t,a){"use strict";var n=a(90),r=a(72),c=a(73),o=a(75),i=a(74),s=a(76),l=a(0),u=a.n(l),p=a(19),d=a(26),m=a(7),h=a.n(m),f=a(78),E=a(69),y=a(196),b=a(59),v=a(144),g=a(66),O=a(65),k=a.n(O),C=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={expanded:!1,anchorEl:null},a.handleExpandClick=function(){a.setState(function(e){return{expanded:!e.expanded}})},a.handleClickMore=function(e){a.setState({anchorEl:e.currentTarget})},a.handleCloseMore=function(e){if(a.setState({anchorEl:null}),"edit"===e)a.props.history.push({pathname:"/editVehicle",state:{carData:a.props.cardata}});else if("delete"===e){var t="/api/users/specific/".concat(a.props.username,"/removeCar"),n=JSON.stringify({id:a.props.cardata._id});a.props.fetchHelp().then(function(e){k.a.post(t,n,{headers:e.headers}).then(function(e){400!==e.status?(a.props.removeCard(a.props.id),a.props.dispatch(Object(g.a)({message:"Successfully deleted vehicle"}))):a.props.dispatch(Object(g.a)({message:"Failed to delete vehicle",options:{variant:"warning"}}))}).catch(function(e){return console.log(e.response)})}).catch(function(e){console.log(e)})}},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"renderHiddenCardContent",value:function(){var e=this.props,t=e.classes,a=e.hiddencardcontent,r=e.leftactions;return a?u.a.createElement(u.a.Fragment,null,u.a.createElement(p.e,{className:t.actions,disableActionSpacing:!0},r,u.a.createElement(p.w,{className:h()(t.expand,Object(n.a)({},t.expandOpen,this.state.expanded)),onClick:this.handleExpandClick,"aria-expanded":this.state.expanded,"aria-label":"Show more"},u.a.createElement(f.f,null))),u.a.createElement(p.j,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},u.a.createElement(p.f,null,a))):null}},{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.subheader,r=t.cardcontent,c=t.cardheaderstyle,o=t.cardbodystyle,i=t.onClick,s=t.action,l=this.state.anchorEl;return u.a.createElement(p.d,{style:{minHeight:"10vw"}},u.a.createElement(p.g,{title:a,subheader:n,style:c,action:"car"===s?u.a.createElement(u.a.Fragment,null,u.a.createElement(p.w,{style:{zIndex:"100"},onClick:this.handleClickMore,"aria-owns":l?"simple-menu":void 0,"aria-haspopup":"true"},u.a.createElement(f.k,null)),u.a.createElement(p.E,{id:"simple-menu",anchorEl:l,open:Boolean(l),onClose:this.handleCloseMore},u.a.createElement(p.F,{onClick:function(){return e.handleCloseMore("edit")}},"Edit"),u.a.createElement(p.F,{onClick:function(){return e.handleCloseMore("delete")}},"Delete"))):null}),u.a.createElement(p.f,{style:o,onClick:i},r),this.renderHiddenCardContent())}}]),t}(u.a.Component);t.a=Object(y.a)(Object(d.withStyles)(function(e){return{actions:{display:"flex"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}),E.e,Object(b.b)(function(e){return{username:e.auth.user.username}},function(e){return{fetchHelp:function(t,a,n,r){return e(Object(v.a)(t,a,n,r))},dispatch:e}}))(C)},6380:function(e,t,a){"use strict";a.r(t),a.d(t,"Permits",function(){return O});var n=a(72),r=a(73),c=a(75),o=a(74),i=a(76),s=a(0),l=a.n(s),u=a(19),p=a(26),d=a(49),m=a(69),h=a(196),f=a(59),E=a(78),y=a(144),b=a(6124),v=a(65),g=a.n(v),O=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).state={permitsData:null,today:new Date},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fetchPermitsData()}},{key:"componentWillUnmount",value:function(){this.setState({permitsData:null})}},{key:"fetchPermitsData",value:function(){var e=this,t=this.props.username;this.props.fetchHelp().then(function(a){g.a.get("/api/permits/specific/".concat(t),{headers:a.headers}).then(function(t){400!==t.status&&e.setState({permitsData:t.data.results})})}).catch(function(e){return console.log(e)})}},{key:"renderPermits",value:function(){var e=this,t=this.state.permitsData;return t&&t.length>0?l.a.createElement(l.a.Fragment,null,t.map(function(t,a){for(var n=t.car,r=t.permitType,c=t,o=e.props.permitTypesList,i={},s=0;s<o.length;s++)if(c.permitType.permitType===o[s].permitType){i.backgroundColor=o[s].color;break}var p=l.a.createElement(u.V,{variant:"h6",style:{color:"#ffffff"}},r.permitType,"\xa0Permit"),m=new Date(c.expirationDate),h="".concat(m.getMonth()+1,"/").concat(m.getDate(),"/").concat(m.getFullYear()),f=l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{style:{color:"#9E9E9E"}},"".concat(n.year," ").concat(n.make," ").concat(n.model)),l.a.createElement("p",{style:{color:"#9E9E9E"}},"Expires: ".concat(h)));return l.a.createElement(u.t,{item:!0,xs:12,sm:4,md:3,key:a},l.a.createElement(d.b,{to:{pathname:"/permits/".concat(a),state:{data:c}},style:{textDecoration:"none"}},l.a.createElement(b.a,{subheader:p,cardcontent:f,hiddencardcontent:null,cardheaderstyle:i})))})):l.a.createElement(u.t,{item:!0,xs:12},l.a.createElement(u.V,{variant:"h6"},"You have no permits!"),l.a.createElement(u.V,{variant:"h6"},"Press the plus button to add a permit."))}},{key:"render",value:function(){var e=this.props.classes;return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.V,{variant:"h4",gutterBottom:!0,component:"h4"},"Permits"),l.a.createElement(u.t,{container:!0,spacing:24},this.renderPermits()),l.a.createElement("div",{className:e.fab},l.a.createElement(d.b,{to:"/authenticated/page-1",style:{textDecoration:"none"}},l.a.createElement(u.o,{color:"secondary",style:{lineHeight:0}},l.a.createElement(u.v,null,l.a.createElement(E.a,null))))))}}]),t}(l.a.Component);t.default=Object(h.a)(m.e,Object(p.withStyles)(function(e){return{fab:{position:"fixed",bottom:0,right:0,margin:"5%"}}}),Object(f.b)(function(e){return{username:e.auth.user.username,permitTypesList:e.ui.formValues.permitTypesList}},function(e){return{fetchHelp:function(t,a,n,r){return e(Object(y.a)(t,a,n,r))}}}))(O)}}]);
//# sourceMappingURL=19.b001c65c.chunk.js.map