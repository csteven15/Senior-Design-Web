(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{352:function(e,t,a){"use strict";var r=a(92),n=a.n(r),s=a(44),i=function(e){var t=e.getIn;return function(e,a){n()(e,"Form value must be specified");var r=a||function(e){return t(e,"form")};return function(a){for(var i=arguments.length,l=new Array(i>1?i-1:0),o=1;o<i;o++)l[o-1]=arguments[o];return n()(l.length,"No fields specified"),1===l.length?t(r(a),e+".values."+l[0]):l.reduce(function(n,i){var l=t(r(a),e+".values."+i);return void 0===l?n:s.a.setIn(n,i,l)},{})}}};t.a=i(s.a)},6091:function(e,t,a){"use strict";function r(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}a.d(t,"a",function(){return r})},6390:function(e,t,a){"use strict";a.r(t);var r=a(72),n=a(73),s=a(75),i=a(74),l=a(76),o=a(0),c=a.n(o),p=a(19),m=a(26),u=a(196),d=a(352),h=a(59),f=a(69),b=a(141),E=a(6091),y=a(381),v=a(380),g=a(144),w=a(66),O=a(65),j=a.n(O);var A=function(e){var t=e.label,a=e.input,r=e.disabled,n=e.autoComplete,s=e.meta,i=s.touched,l=s.invalid,o=s.error,m=Object(E.a)(e,["label","input","disabled","autoComplete","meta"]);return c.a.createElement(p.T,Object.assign({disabled:r,label:t,placeholder:t,autoComplete:n,error:i&&l,helperText:i&&o},a,m))},F=function(e){var t=e.touched,a=e.error;return t&&a?c.a.createElement(p.r,{style:{color:"#f44336"}},t&&a):t?a?c.a.createElement(p.r,{style:{color:"#f44336"}},a):null:c.a.createElement(p.r,null,a)},N=function(e){var t=e.input,a=e.label,r=e.meta,n=r.touched,s=r.error,i=e.children;return c.a.createElement(p.p,{error:n&&s,margin:"normal",required:!0,fullWidth:!0},c.a.createElement(p.z,{htmlFor:a},a),c.a.createElement(p.H,Object.assign({},t,{inputProps:{name:a,id:a}}),i),F({touched:n,error:s}))},D=function(e){var t=e.input,a=(e.label,e.options),r=e.meta,n=r.touched,s=r.error;return c.a.createElement(c.a.Fragment,null,a.map(function(e){return c.a.createElement(p.p,{key:e.permitType},c.a.createElement(p.q,{control:c.a.createElement(p.h,{checked:-1!==t.value.indexOf(e.permitType),onChange:function(a){var r=Object(b.a)(t.value);return a.target.checked?r.push(e.permitType):r.splice(r.indexOf(e.permitType),1),t.onChange(r)}}),label:e.permitType}))}),F({touched:n,error:s}))},T=Object(d.a)("UserForm"),x=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).updateForm=function(){var e={username:a.props.initData.username,email:a.props.initData.emailAddress,firstname:a.props.initData.firstName,middleinitial:a.props.initData.middleInitial,lastname:a.props.initData.lastName,phone:a.props.initData.phoneNumber,streetAddress1:a.props.initData.addressLine1,streetAddress2:a.props.initData.addressLIne2,city:a.props.initData.city,state:a.props.initData.state,zip:a.props.initData.zipCode,level:a.props.initData.accountLevel,spaceNumber:a.props.initData.spaceNumber,swapsAllowed:a.props.initData.swapsAllowed,permitType:[]};a.props.initData.allowedPermits.map(function(t){return e.permitType.push(t.permitType),"A"===t.permitType&&(e.spaceNumber=t.spaceNumber),null}),a.props.initialize(e)},a.deleteUser=function(){a.props.fetchHelp().then(function(e){var t=a.props.location.state.username,r={username:t};j.a.post("/api/users/deleteUser",r,{headers:e.headers}).then(function(e){400!==e.status?(a.props.dispatch(Object(w.a)({message:"Successfully deleted ".concat(t," ")})),a.props.history.goBack()):a.props.dispatch(Object(w.a)({message:"Failed to delete ".concat(t," "),options:{variant:"warning"}}))}).catch(function(e){return console.log(e.response)})}).catch(function(e){return console.log(e)})},a.renderSwapsAllowed=function(){return a.props.update?c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(p.p,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(y.a,{name:"swapsAllowed",component:A,label:"Swaps Allowed",autoFocus:!0}))):null},a}return Object(l.a)(t,e),Object(n.a)(t,[{key:"componentDidUpdate",value:function(e,t){return e.initData!==this.props.initData&&(this.updateForm(),!0)}},{key:"render",value:function(){var e=this,t=this.props.globalFormValues.statesList,a=this.props.globalFormValues.permitTypesList,r=this.props,n=r.handleSubmit,s=r.classes;return c.a.createElement("form",{onSubmit:n},c.a.createElement(p.t,{container:!0,spacing:24},c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(p.p,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(y.a,{name:"username",component:A,label:"Username",autoFocus:!0,disabled:this.props.update}))),c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(p.p,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(y.a,{name:"email",component:A,label:"Email",autoFocus:!0,disabled:this.props.update}))),c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(p.p,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(y.a,{name:"firstname",component:A,label:"First Name",autoFocus:!0}))),c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(p.p,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(y.a,{name:"middleinitial",component:A,label:"Middle Initial",autoFocus:!0}))),c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(p.p,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(y.a,{name:"lastname",component:A,label:"Last Name",autoFocus:!0}))),c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(p.p,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(y.a,{name:"password",component:A,label:"Password",autoFocus:!0,disabled:this.props.update,type:"password"}))),c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(p.p,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(y.a,{name:"phone",component:A,label:"Phone",autoFocus:!0}))),c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(p.p,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(y.a,{name:"streetAddress1",component:A,label:"Street Address 1",autoFocus:!0}))),c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(p.p,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(y.a,{name:"streetAddress2",component:A,label:"Street Address 2",autoFocus:!0}))),c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(p.p,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(y.a,{name:"city",component:A,label:"City",autoFocus:!0}))),c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(y.a,{name:"state",component:N,label:"State"},t.map(function(e,t){return c.a.createElement(p.F,{key:t,value:e},e)}))),c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(p.p,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(y.a,{name:"zip",component:A,label:"Zip Code",autoFocus:!0}))),c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(y.a,{name:"level",component:N,label:"Level"},["100","200","300"].map(function(e,t){return c.a.createElement(p.F,{key:t,value:e},"100"===(a=e)?"Standard":"200"===a?"Enforcer":"Administrator");var a}))),this.renderSwapsAllowed(),c.a.createElement(p.t,{item:!0,xs:12}),c.a.createElement(p.t,{item:!0,xs:12},c.a.createElement(y.a,{name:"permitType",options:a,component:D,label:a})),this.props.values.permitType&&this.props.values.permitType.includes("A")?c.a.createElement(p.t,{item:!0,sm:6,xs:12},c.a.createElement(p.p,{margin:"normal",required:!0,fullWidth:!0},c.a.createElement(y.a,{name:"spaceNumber",component:A,label:"Space Number",autoFocus:!0}))):null),c.a.createElement("br",null),c.a.createElement("div",{className:s.buttons},c.a.createElement(p.c,{type:"button",variant:"contained",color:"default",className:s.submit,onClick:function(){return e.props.history.goBack()}},"Back"),this.props.update?c.a.createElement(p.c,{type:"button",variant:"contained",color:"secondary",className:s.submit,onClick:function(){return e.deleteUser()}},"Delete"):null,c.a.createElement(p.c,{type:"submit",variant:"contained",color:"primary",className:s.submit},this.props.create?"Create":"Update")))}}]),t}(c.a.Component),S=Object(u.a)(f.e,Object(v.a)({form:"UserForm",validate:function(e,t){var a={},r=["username","firstname","lastname","email","streetAddress1","city","state","level","phone","state","zip","level"];return"undefined"===typeof e.permitType?a.permitType="Required":0===e.permitType.length&&(a.permitType="Required"),t.create&&r.push("password"),t.update&&r.push("swapsAllowed"),e.permitType&&e.permitType.includes("A")&&r.push("spaceNumber"),r.forEach(function(t){e[t]||(a[t]="Required")}),e.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)&&(a.email="Invalid email address"),a}}),Object(h.b)(function(e){return{values:T(e,"username","email","firstname","lastname","middleinitial","phone","streetAddress1","streetAddress2","city","state","zip","level","permitType","swapsAllowed"),globalFormValues:e.ui.formValues}},function(e){return{fetchHelp:function(t,a,r,n){return e(Object(g.a)(t,a,r,n))},dispatch:e}}),Object(m.withStyles)(function(e){return{submit:{marginTop:3*e.spacing.unit},buttons:{display:"flex",justifyContent:"space-between"}}}))(x),k=Object(d.a)("UserForm"),q=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={initData:null},a.fetchData=function(){a.props.fetchHelp().then(function(e){j.a.get("/api/users/specific/".concat(a.props.location.state.username),{headers:e.headers}).then(function(e){400!==e.status?(a.props.dispatch(Object(w.a)({message:"Fetched user data"})),a.setState({initData:e.data})):a.props.dispatch(Object(w.a)({message:"".concat(e.data),options:{variant:"warning"}}))}).catch(function(e){400===e.response.status&&a.props.dispatch(Object(w.a)({message:"".concat(e.response.data.message),options:{variant:"warning"}}))})}).catch(function(e){console.log(e)})},a}return Object(l.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){this.props.update&&this.fetchData()}},{key:"render",value:function(){var e=this,t=this.props.classes;return c.a.createElement("div",{className:t.content},this.props.create?c.a.createElement(p.V,{variant:"h4",gutterBottom:!0,component:"h4"},"Register a New User"):c.a.createElement(p.V,{variant:"h4",gutterBottom:!0,component:"h4"},"Update User"),c.a.createElement(S,{onSubmit:function(){return function(e){var t=e.values,a=e.allowedPermits,r=e.spaceNumber,n=a.map(function(e){return"A"===e?{permitType:e,spaceNumber:r}:{permitType:e}}),s="";e.create&&(s="/api/users/initializeNewUser"),e.update&&(s="/api/users/specific/".concat(e.location.state.username,"/updateManyFields"));var i={firstName:t.firstname,middleInitial:t.middleinitial,lastName:t.lastname,phoneNumber:t.phone,addressLine1:t.streetAddress1,addressLine2:t.streetAddress2,city:t.city,state:t.state,zipCode:t.zip,accountLevel:t.level,allowedPermits:n};e.create&&(i.username=t.username,i.emailAddress=t.email,i.password=t.password),e.update&&(i.swapsAllowed=t.swapsAllowed),e.fetchHelp().then(function(t){j.a.post(s,i,{headers:t.headers}).then(function(t){400!==t.status&&(e.dispatch(Object(w.a)({message:e.update?"Successfully updated user":"Successfully created user"})),e.history.goBack())}).catch(function(t){400===t.response.status&&e.dispatch(Object(w.a)({message:"".concat(t.response.data.message),options:{variant:"warning"}}))})}).catch(function(e){console.log(e)})}(e.props)},update:this.props.update,create:this.props.create,initData:this.state.initData}))}}]),t}(c.a.Component);t.default=Object(u.a)(f.e,Object(h.b)(function(e){return{allowedPermits:k(e,"permitType"),spaceNumber:k(e,"spaceNumber"),values:k(e,"username","email","firstname","middleinitial","lastname","password","phone","streetAddress1","streetAddress2","city","state","zip","level","swapsAllowed")}},function(e){return{fetchHelp:function(t,a,r,n){return e(Object(g.a)(t,a,r,n))},dispatch:e}}),Object(m.withStyles)(function(e){return{content:{flexGrow:1,padding:1*e.spacing.unit}}}))(q)}}]);
//# sourceMappingURL=18.4fb667ab.chunk.js.map